# 🅿️ 台北市停車場資訊資料探勘專案  
**Data Mining Final Project — Taipei City Parking Lot Analysis**

---

## 📖 專案簡介

本專案為輔仁大學《資料探勘》課程期末報告，目的在於分析台北市開放資料平台所提供的**停車場資訊**，探討其收費方式、營運型態與設施特徵之間的潛在關聯，並透過多種資料探勘方法建立分類、預測與分群模型，以期提供城市交通與停車管理之決策參考。

> **主要目標：**  
> - 建立模型預測停車場是否由「停管處」或「非停管處」經營  
> - 分析停車場設施與收費模式之間的關聯法則  
> - 透過分群分析辨識不同型態停車場之特徵分布

---

## 📂 專案架構

```
data_mining_project/
├── data/
│ ├── raw/                      # 原始資料 (JSON, CSV)
│ │ ├── TCMSV_alldesc-2.json
│ │ └── raw_taipei_paring_lot_Info.csv
│ └── processed/                # 前處理後資料
│ ├── preprocessing2_fare.csv
│ └── preprocessing3_taipei_paring_lot_availble.csv
├── results                     # 結果圖表
├── src/                        # 分析程式模組
│ ├── 01_output_csv.py          # 匯入並清理原始資料
│ ├── 02_prepare.py             # 前處理與欄位整理
│ ├── 03_decision_tree.py       # 決策樹分類
│ ├── 04_association rules.py   # 關聯規則分析
│ ├── 05_svm.py                 # 支援向量機 (SVM)
│ ├── 06_RF.py                  # 隨機森林 (Random Forest)
│ ├── 07_KNN.py                 # K 最近鄰 (KNN)
│ ├── 08_voting.py              # 投票分類器 (Voting Classifier)
│ └── 09_KMeans.py              # 分群分析 (K-Means)
└── README.md
```

---

## 🧾 資料來源

資料取自 **台北市資料大平台**：

- [台北市停車場資訊資料集](https://data.taipei/dataset/detail?id=d5c0656b-5250-4179-a491-c94daa56ef2c)  
- 含行政區、車位數、營業時間、收費方式、充電站資訊等欄位。

---

## 🧹 資料前處理流程

1. **欄位篩選與刪除**
   - 移除單一值欄位、欄位意義不明、資料極度缺漏、或無關欄位（如 `totalbus`）。
   - 刪除地理坐標欄位（以 `area` 行政區取代）。

2. **特徵衍生與編碼**
   - `type2` 經營模式 → {1: 停管處經營, 2: 非停管處經營}  
   - `serviceTime` 營業時間 → {0: 24小時, 1: 非24小時}  
   - `PAYEX` 收費資訊拆解並生成新變數：
     - 小型車日/夜/假日與特殊日/月租  
     - 機車日/夜/月租  
     - 大型重機月租  
   - 新增分類欄位 `parking_fare_classification`  
     （僅月租 / 僅汽車 / 僅機車 / 混合式）

3. **遺失值處理**
   - PAYEX 收費遺失值以 `-1` 或中位數補值。

4. **類別與連續變數處理**
   - 變數離散化（Equal Frequency 等頻分箱）
   - 類別變數編碼（LabelEncoder 或 OneHotEncoder）
   - 依模型選擇是否進行標準化（SVM、KNN 需標準化）

---

## 🧠 模型建置與分析方法

| 模型類型 | 方法名稱 | 應用與特徵 | 備註 |
|:---------|:-----------|:------------|:------|
| **分類** | 決策樹 (Decision Tree) | 解釋性高、支援類別變數、使用 entropy 為分割準則 | 最佳測試準確率 0.9003 |
| **分類** | 支援向量機 (SVM) | 使用 SVC、標準化處理、C=1 表現最佳 | 輕微過度配適時仍穩定 |
| **分類** | 隨機森林 (Random Forest) | n_estimators=100, max_depth=8 | 穩定性與效能最佳 |
| **分類** | K 最近鄰 (KNN) | k=5, 使用標準化 | 測試正確率 0.9003 |
| **分類整合** | 投票分類器 (Voting Classifier) | 結合 DT+SVM+RF+KNN (Soft/Hard Voting) | Soft Voting 準確率較高 |
| **關聯規則** | Apriori + Lift | 以停管處經營型態為目標，min_support=0.05, lift>1.1 | 找出重要關聯項 |
| **分群** | K-Means | 以 Elbow method 決定 K=5 | 聚類出五種停車場型態 |

---

## 📊 分析結果摘要

### 🔹 決策樹結果
- 最佳模型：Entropy + 精選變數 5 個  
- 測試準確率：0.9003  
- 交叉驗證平均準確率：0.8754  
- 樹深度：8、葉節點：24  
- 規則示例：  
  - 若充電站數低 + 動態停車場 → 高機率屬於「停管處經營」  
  - 若高充電站 + 全天營業 + 靜態場 → 多為「非停管處經營」

---

### 🔹 關聯法則結果
- 採 Oversampling 平衡資料（停管處樣本提升至 1248 筆）
- 主要規則示例：
    - 若 totalmotor=0 且 type=1.0 → 高機率為 type2=2.0（非停管處）
- 各規則 Confidence 皆 > 0.05，Lift > 1.1，具正向關聯。

---

### 🔹 各模型效能比較

下表呈現各分類模型的訓練與測試準確率比較。整體而言，各模型皆具有良好穩定性與泛化能力，其中以 **隨機森林（Random Forest）** 表現最優，兼具高準確率與低誤差，為本研究的最終推薦模型。

| 模型 | 訓練集準確率 | 測試集準確率 | 備註 |
|:------|:---------------:|:---------------:|:------|
| Decision Tree | 0.8941 | 0.9003 | 高解釋性、低過度配適，能清楚觀察特徵影響。 |
| SVM | 0.9169 | 0.9091 | 經標準化處理後表現穩定，對高維特徵具辨識力。 |
| Random Forest | 0.9647 | 0.9443 | 最穩定、效能最佳，**整體最佳模型**。 |
| KNN (k=5) | 0.9162 | 0.9003 | 準確且結構簡單，適合作為基準模型。 |
| Voting Soft | 0.9478 | 0.9296 | 綜合多模型優勢，整體表現優異。 |
| Voting Hard | 0.9449 | 0.9267 | 成效接近 Soft Voting，提升模型穩定性。 |

---

### 🔹 K-Means 分群結果
- 以 SSE (Sum of Squared Errors) 觀察 elbow point → **K = 5**
- K=5 的 SSE = 17772.464，群內差異顯著下降
- 各群代表：
    1️⃣ 小型商業區車位群 
    2️⃣ 大型高收費混合場群
    3️⃣ 中型平價混合場群
    4️⃣ 高價夜間收費型群 
    5️⃣ 中型機車導向混合場群

---

## 🧩 結論與討論

### 1. 模型整體表現

本專案以多種分類模型比較停車場經營型態預測的準確性。  
整體結果顯示：

- **隨機森林（Random Forest）** 以 **測試準確率 0.9443** 表現最佳，兼具穩定與高效能，是本研究的最終推薦模型。  
- **決策樹（Decision Tree）** 具高可解釋性，可直接觀察主要影響因子，如營業時間、充電設施與停車場類型。  
- **SVM、KNN 與投票分類器（Voting Classifier）** 效能相近，皆能維持約 0.90 以上準確率，顯示資料品質良好、特徵具辨識性。  

整體而言，隨機森林在訓練與測試集間誤差最小，泛化能力優，為預測「停管處經營 vs 非停管處經營」最合適的模型。

### 2. K-Means 分群分析結果

以肘部法（Elbow Method）選定 **K = 5**，共分為五種停車場型態群：

| 群別 | 群名 | 概要 |
|:--:|:------------------|:--------------------------------|
| 0️⃣ | 小型商業區車位群 | 中山區、小型、靜態場、24 小時營業，收費中等。 |
| 1️⃣ | 大型高收費混合場群 | 信義區、大型動態場、24 小時營業，假日與機車收費高。 |
| 2️⃣ | 中型平價混合場群 | 信義區、中型動態場、24 小時營業，收費偏低。 |
| 3️⃣ | 高價夜間收費型群 | 信義與松山區、小型靜態場，夜間汽車收費高。 |
| 4️⃣ | 中型機車導向混合場群 | 大同區、靜／動態混合，汽車收費低但機車收費偏高。 |

此分群結果反映台北市各行政區停車場之差異化特徵，  
例如信義區集中於高收費與混合型場站，而中山、大同區則以住宅導向、低價型停車場為主。

### 3. 綜合討論

- **主要影響因素：** 收費價格、營業時間與場站類型為影響經營型態的重要特徵。  
- **監督式學習結果：** 隨機森林具最佳穩定性與泛化性。  
- **非監督式學習結果：** 五群輪廓清晰，可作為後續收費策略與區域規劃參考。  

整體而言，本研究成功建立多模型比較與分群架構，  
不僅能預測停車場經營模式，也能協助理解不同區域的停車環境特徵，  
為城市停車管理與政策制定提供具體參考依據。

---

## 🔮 未來可改進方向

- 擴充資料集至**新北市與桃園市**進行跨城市比較  
- 結合 **Power BI / Streamlit** 製作互動式視覺化儀表板  
- 應用 **深度學習分類器（MLP, CNN）** 提升非線性特徵辨識能力  

---

## ⚙️ 執行環境與操作方式

### 📌 開發環境
- **作業系統：** Windows 10 / 11  
- **Python 版本：** 3.12.2  
- **開發工具：** Spyder (Anaconda / pip 安裝版均可)

---

### 🧩 套件安裝

請先確認系統已安裝 Python 3.12.2，並能在終端機（或 Spyder Console）執行指令：

```bash
python --version
```
> 若顯示 `Python 3.12.2` 即可。

接著安裝所需套件：

```bash
pip install pandas numpy scikit-learn mlxtend matplotlib seaborn
```
> 💡 若您使用的是 Anaconda，以上套件多半已預裝，可僅需補安裝 mlxtend：
    `conda install -c conda-forge mlxtend`

#### 在 Spyder 執行程式

1. 開啟 **Spyder** → 點選左上角「File → Open」，打開專案資料夾中的 `src`。
2. 依分析階段選擇要執行的 `.py` 檔案（例如 `03_decision_tree.py`）。
3. 點選綠色「▶ Run」按鈕即可執行。

#### pip 執行各分析模組

```bash
python src/01_output_csv.py
python src/02_prepare.py
python src/03_decision_tree.py
...
python src/09_KMeans.py
```

所有模型輸出（準確率、混淆矩陣、分群圖）將自動存放於 results/。

---

## 👩‍💻 專案製作團隊
| 姓名                  | 系所                | 角色               |
| :------------------ | :---------------- | :--------------- |
| **徐胤瑄** | 輔仁大學企業管理學系 / 輔系統計資訊學系 | 專案資料整理、模型建置、報告撰寫 |

---

## 📎 附註
- 報告簡報檔案：[DM report ppt_台北市停車場資訊](https://www.canva.com/design/DAGp7H6k9gk/0NgD8rjv7CmedeJo06iyHg/view?utm_content=DAGp7H6k9gk&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=hc458aff97c)
- 原始資料：台北市資料大平台

> 本專案為學術課程用途，僅作資料探勘技術展示與教育示範之用。